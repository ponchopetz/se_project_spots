!function(){"use strict";const e={formSelector:".modal__form",labelSelector:".modal__label",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inputErrorClass:"modal__input_type_error",labelErrorClass:"modal__label_type_error",errorClass:"modal__input-error_active"};var t=class{constructor(e,t){this._settings=e,this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._errorClass=e.errorClass,this._inputErrorClass=e.inputErrorClass,this._labelErrorClass=e.labelErrorClass,this._inactiveButtonClass=e.inactiveButtonClass}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`),i=e.closest(this._settings.labelSelector);e.classList.add(this._inputErrorClass),i&&i.classList.add(this._labelErrorClass),s&&(s.textContent=t,s.classList.add(this._errorClass))}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`),s=e.closest(this._settings.labelSelector);e.classList.remove(this._inputErrorClass),s&&s.classList.remove(this._labelErrorClass),t&&(t.textContent="",t.classList.remove(this._errorClass))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some(e=>!e.validity.valid)}_toggleButtonState(){this._buttonElement&&(this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1))}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach(e=>{e.addEventListener("input",()=>{this._checkInputValidity(e),this._toggleButtonState()})})}enableValidation(){this._setEventListeners()}resetValidation(){this._inputList.forEach(e=>{this._hideInputError(e)}),this._toggleButtonState()}resetForm(){this._formElement.reset(),this.resetValidation()}},s=class{constructor(e,t,{handleLike:s,handleUnlike:i,handleDelete:n,handlePreview:r}={},o){this._data=e,this._templateSelector=t,this._handleLike=s,this._handleUnlike=i,this._handleDelete=n,this._handlePreview=r,this.id=e._id,this._ownerId=e.owner,this._currentUserId=o,this._isLiked=Boolean(e.isLiked)}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_updateLikeState(){this._isLiked?this._likeBtn.classList.add("card__like-btn_active"):this._likeBtn.classList.remove("card__like-btn_active")}setLikeState(e){this._isLiked=e,this._updateLikeState()}deleteCard(){this._element.remove(),this._element=null}_setEventListeners(){this._likeBtn.addEventListener("click",()=>{this._isLiked?this._handleUnlike(this):this._handleLike(this)}),this._deleteBtn&&this._deleteBtn.addEventListener("click",()=>{this._handleDelete(this)}),this._imageEl.addEventListener("click",()=>{this._handlePreview(this._data)})}getView(){return this._element=this._getTemplate(),this._titleEl=this._element.querySelector(".card__title"),this._imageEl=this._element.querySelector(".card__image"),this._likeBtn=this._element.querySelector(".card__like-btn"),this._deleteBtn=this._element.querySelector(".card__delete-btn"),this._titleEl.textContent=this._data.name,this._imageEl.src=this._data.link,this._imageEl.alt=this._data.name,this._ownerId!==this._currentUserId&&(this._deleteBtn.remove(),this._deleteBtn=null),this._updateLikeState(),this._setEventListeners(),this._element}},i=class{constructor({popupSelector:e}){this._popupElement=document.querySelector(e),this._popupCloseBtn=this._popupElement.querySelector(".modal__close-btn"),this._handleEscapeClose=this._handleEscapeClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupCloseBtn.addEventListener("click",()=>{this.close()}),this._popupElement.addEventListener("mousedown",e=>{const t=e.target.classList.contains("modal_opened"),s=e.target.classList.contains("modal__close-btn");(t||s)&&this.close()})}},n=class extends i{constructor({popupSelector:e,handleFormSubmit:t,disableButtonOnOpen:s=!1}){super({popupSelector:e}),this._handleFormSubmit=t,this._disableButtonOnOpen=s,this._form=this._popupElement.querySelector(".modal__form"),this._inputList=Array.from(this._form.querySelectorAll(".modal__input")),this._submitBtn=this._popupElement.querySelector(".modal__submit-btn"),this._defaultSubmitText=this._submitBtn.textContent}open(){super.open(),this._disableButtonOnOpen&&(this._submitBtn.disabled=!0,this._submitBtn.classList.add("modal__submit-btn_disabled"))}setLoading(e,t="Saving..."){e?(this._submitBtn.textContent=t,this._submitBtn.disabled=!0):(this._submitBtn.textContent=this._defaultSubmitText,this._submitBtn.disabled=!1)}_getInputValues(){const e={};return this._inputList.forEach(t=>{e[t.name]=t.value}),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)})}close(){super.close()}};const r=document.querySelector(".profile__avatar-edit-btn"),o=document.querySelector("#edit-avatar-modal .modal__form"),l=document.querySelector(".profile__edit-btn"),a=document.querySelector("#edit-profile-modal .modal__form"),d=document.querySelector("#name-input"),c=document.querySelector("#description-input"),_=document.querySelector(".profile__name"),h=document.querySelector(".profile__description"),u=document.querySelector(".profile__new-btn"),m=document.querySelector("#new-profile-modal .modal__form"),p=document.querySelector(".modal__image-preview"),E=document.querySelector(".modal__image-caption"),b=document.querySelector("#confirm-delete-btn"),S=document.querySelector("#cancel-delete-btn");let v=null,L=null,f=null;const C=new i({popupSelector:"#preview-modal"});C.setEventListeners();const k=new i({popupSelector:"#delete-modal"});k.setEventListeners();const y=new class{constructor({baseUrl:e,headers:t}){this._baseUrl=e,this._headers=t}_request(e,t={}){return fetch(`${this._baseUrl}${e}`,{headers:this._headers,...t}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}getUserInfo(){return this._request("users/me")}updateUserInfo(e){return this._request("users/me",{method:"PATCH",body:JSON.stringify(e)})}updateAvatar(e){return this._request("users/me/avatar",{method:"PATCH",body:JSON.stringify(e)})}getInitialCards(){return this._request("cards")}addCard(e){return this._request("cards",{method:"POST",body:JSON.stringify(e)})}deleteCard(e){return this._request(`cards/${e}`,{method:"DELETE"})}likeCard(e){return this._request(`cards/${e}/likes`,{method:"PUT"})}unlikeCard(e){return this._request(`cards/${e}/likes`,{method:"DELETE"})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1/",headers:{authorization:"58744bfa-b851-41cd-8747-fb7af9a88838","Content-type":"application/json"}}),g=(e,{position:t="append"}={})=>{const i=new s(e,"#card-template",{handleLike:e=>{y.likeCard(e.id).then(t=>{e.setLikeState(t.isLiked)}).catch(e=>console.error("Like failed:",e))},handleUnlike:e=>{y.unlikeCard(e.id).then(t=>{e.setLikeState(t.isLiked)}).catch(e=>console.error("Unlike failed:",e))},handleDelete:e=>{L=e,f=e.id,k.open()},handlePreview:e=>{E.textContent=e.name,p.src=e.link,p.alt=e.name,C.open()}},v).getView();q.addItem(i,{position:t})},q=new class{constructor({items:e=[],renderer:t,containerSelector:s}){this._items=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(){this._items.forEach(e=>{this._renderer(e)})}addItem(e,{position:t="append"}={}){"prepend"===t?this._container.prepend(e):this._container.append(e)}setItems(e){this._items=e}}({items:[],renderer:e=>g(e,{position:"append"}),containerSelector:".cards__list"});b.addEventListener("click",()=>{f&&(b.textContent="Deleting...",y.deleteCard(f).then(()=>{L.deleteCard(),k.close(),L=null,f=null}).catch(e=>console.error("Delete failed:",e)).finally(()=>{b.textContent="Delete"}))}),S.addEventListener("click",()=>{k.close()});const B=new n({popupSelector:"#edit-avatar-modal",handleFormSubmit:e=>{B.setLoading(!0),y.updateAvatar({avatar:e.avatar}).then(e=>{document.querySelector(".profile__avatar").src=e.avatar,B.close(),F.resetForm()}).catch(e=>{console.error("Failed to update avatar:",e)}).finally(()=>{B.setLoading(!1)})}});B.setEventListeners();const w=new n({popupSelector:"#edit-profile-modal",handleFormSubmit:e=>{w.setLoading(!0),y.updateUserInfo({name:e.profileName,about:e.profileDescription}).then(e=>{_.textContent=e.name,h.textContent=e.about,w.close(),x.resetForm()}).catch(e=>{console.error("Failed to update profile:",e)}).finally(()=>{w.setLoading(!1)})}});w.setEventListeners();const I=new n({popupSelector:"#new-profile-modal",handleFormSubmit:e=>{I.setLoading(!0),y.addCard({name:e.imageCaption,link:e.imageLink}).then(e=>{g(e,{position:"prepend"}),I.close(),U.resetForm()}).catch(e=>{console.error("Failed to add card:",e)}).finally(()=>{I.setLoading(!1)})},disableButtonOnOpen:!0});I.setEventListeners();const x=new t(e,a);x.enableValidation();const U=new t(e,m);U.enableValidation();const F=new t(e,o);F.enableValidation(),l.addEventListener("click",()=>{d.value=_.textContent,c.value=h.textContent,x.resetValidation(),w.open()}),u.addEventListener("click",()=>{I.open()}),r.addEventListener("click",()=>{F.resetForm(),B.open()}),Promise.all([y.getUserInfo(),y.getInitialCards()]).then(([e,t])=>{v=e._id,_.textContent=e.name,h.textContent=e.about,document.querySelector(".profile__avatar").src=e.avatar,q.setItems(t),q.renderItems()}).catch(e=>{console.error("Error loading initial data:",e)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXVCRixLQUV0Q2tCLFFBQVEsS0FDUFcsRUFBYTdGLFlBQVcsTUFHOUJQLHFCQUFxQixJQUV2Qm9HLEVBQWEzRyxvQkFNYixNQUFNMEcsRUFBZ0IsSUFBSU0sRUFBY3JOLEVBQVUrSCxHQUNsRGdGLEVBQWM3SixtQkFFZCxNQUFNa0ssRUFBZSxJQUFJQyxFQUFjck4sRUFBVXFJLEdBQ2pEK0UsRUFBYWxLLG1CQUViLE1BQU13SixFQUFrQixJQUFJVyxFQUFjck4sRUFBVTZILEdBQ3BENkUsRUFBZ0J4SixtQkFNaEI0RSxFQUFlN0UsaUJBQWlCLFFBQVMsS0FDdkMrRSxFQUFxQlAsTUFBUVMsRUFBY3BHLFlBQzNDbUcsRUFBNEJSLE1BQVFVLEVBQXFCckcsWUFFekRpTCxFQUFjNUosa0JBQ2R3SixFQUFpQjNHLFNBR25Cb0MsRUFBY25GLGlCQUFpQixRQUFTLEtBQ3RDK0osRUFBYWhILFNBR2Y0QixFQUFjM0UsaUJBQWlCLFFBQVMsS0FDdEN5SixFQUFnQnRKLFlBQ2hCa0osRUFBZ0J0RyxTQU9sQjJELFFBQVEyRCxJQUFJLENBQUN4RSxFQUFJZ0IsY0FBZWhCLEVBQUl1QixvQkFDakNkLEtBQUssRUFBRWdFLEVBQVVDLE1BQ2hCNUosRUFBZ0IySixFQUFTcEosSUFDekIrRCxFQUFjcEcsWUFBY3lMLEVBQVNoSSxLQUNyQzRDLEVBQXFCckcsWUFBY3lMLEVBQVNWLE1BQzVDbEksU0FBU25ELGNBQWMsb0JBQW9CZ0UsSUFBTStILEVBQVNmLE9BRTFEbEIsRUFBYWEsU0FBU3FCLEdBQ3RCbEMsRUFBYVEsZ0JBRWRaLE1BQU9DLElBQ05DLFFBQVFDLE1BQU0sOEJBQStCRixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgbGFiZWxTZWxlY3RvcjogXCIubW9kYWxfX2xhYmVsXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGxhYmVsRXJyb3JDbGFzczogXCJtb2RhbF9fbGFiZWxfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG5cbmV4cG9ydCB7IHNldHRpbmdzIH07XG4iLCIvLyBjb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG5cbiAgICAvLyBzZWxlY3RvcnMvY2xhc3NlcyBmcm9tIHNldHRpbmdzXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fbGFiZWxFcnJvckNsYXNzID0gc2V0dGluZ3MubGFiZWxFcnJvckNsYXNzO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgY29uc3QgbGFiZWxFbGVtZW50ID0gaW5wdXRFbGVtZW50LmNsb3Nlc3QodGhpcy5fc2V0dGluZ3MubGFiZWxTZWxlY3Rvcik7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGlmIChsYWJlbEVsZW1lbnQpIGxhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xhYmVsRXJyb3JDbGFzcyk7XG5cbiAgICBpZiAoZXJyb3JFbGVtZW50KSB7XG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG4gIH1cblxuICAvLyBoaWRlIHNpbmdsZSBpbnB1dCBlcnJvclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgY29uc3QgbGFiZWxFbGVtZW50ID0gaW5wdXRFbGVtZW50LmNsb3Nlc3QodGhpcy5fc2V0dGluZ3MubGFiZWxTZWxlY3Rvcik7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGlmIChsYWJlbEVsZW1lbnQpIGxhYmVsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2xhYmVsRXJyb3JDbGFzcyk7XG5cbiAgICBpZiAoZXJyb3JFbGVtZW50KSB7XG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgLy8gY2hlY2sgYSBzaW5nbGUgaW5wdXRcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGFueSBpbnZhbGlkIGlucHV0cyBpbiB0aGlzIGZvcm0/XG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICAvLyB0b2dnbGUgdGhlIHN1Ym1pdCBidXR0b24gZGlzYWJsZWQgc3RhdGVcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICghdGhpcy5fYnV0dG9uRWxlbWVudCkgcmV0dXJuO1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBhZGQgbGlzdGVuZXJzIHRvIGlucHV0cyB0byB2YWxpZGF0ZSBsaXZlXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICAvLyBpbml0aWFsIHN0YXRlXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIHJlc2V0Rm9ybSgpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuXG4gICAgdGhpcy5yZXNldFZhbGlkYXRpb24oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICB7IGhhbmRsZUxpa2UsIGhhbmRsZVVubGlrZSwgaGFuZGxlRGVsZXRlLCBoYW5kbGVQcmV2aWV3IH0gPSB7fSxcbiAgICBjdXJyZW50VXNlcklkXG4gICkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xuICAgIHRoaXMuX2hhbmRsZVVubGlrZSA9IGhhbmRsZVVubGlrZTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XG4gICAgdGhpcy5faGFuZGxlUHJldmlldyA9IGhhbmRsZVByZXZpZXc7XG5cbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXI7XG4gICAgdGhpcy5fY3VycmVudFVzZXJJZCA9IGN1cnJlbnRVc2VySWQ7XG5cbiAgICAvLyDinIUgQm9vbGVhbiBsaWtlIHN0YXRlIGZyb20gYmFja2VuZFxuICAgIHRoaXMuX2lzTGlrZWQgPSBCb29sZWFuKGRhdGEuaXNMaWtlZCk7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgX3VwZGF0ZUxpa2VTdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xuICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idG5fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgc2V0TGlrZVN0YXRlKGlzTGlrZWQpIHtcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl91cGRhdGVMaWtlU3RhdGUoKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5faXNMaWtlZCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVVbmxpa2UodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuX2RlbGV0ZUJ0bikge1xuICAgICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2ltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZVByZXZpZXcodGhpcy5fZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fdGl0bGVFbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9pbWFnZUVsID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gICAgdGhpcy5fZGVsZXRlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG5cbiAgICB0aGlzLl90aXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5uYW1lO1xuICAgIHRoaXMuX2ltYWdlRWwuc3JjID0gdGhpcy5fZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlRWwuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xuXG4gICAgLy8g4pyFIENvcnJlY3Qgb3duZXJzaGlwIGNoZWNrXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX2N1cnJlbnRVc2VySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ0bi5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ0biA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5fdXBkYXRlTGlrZVN0YXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cENsb3NlQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NhcGVDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGNvbnN0IGlzT3ZlcmxheUNsaWNrID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgICBjb25zdCBpc0Nsb3NlQnV0dG9uID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG4gICAgICBpZiAoaXNPdmVybGF5Q2xpY2sgfHwgaXNDbG9zZUJ1dHRvbikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHBvcHVwU2VsZWN0b3IsXG4gICAgaGFuZGxlRm9ybVN1Ym1pdCxcbiAgICBkaXNhYmxlQnV0dG9uT25PcGVuID0gZmFsc2UsXG4gIH0pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbk9uT3BlbiA9IGRpc2FibGVCdXR0b25Pbk9wZW47XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKSk7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG4gICAgdGhpcy5fZGVmYXVsdFN1Ym1pdFRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIGlmICh0aGlzLl9kaXNhYmxlQnV0dG9uT25PcGVuKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiKTtcbiAgICB9XG4gIH1cblxuICBzZXRMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gICAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9kZWZhdWx0U3VibWl0VGV4dDtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG5jb25zdCBhdmF0YXJFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItZWRpdC1idG5cIik7XG5jb25zdCBlZGl0QXZhdGFyRm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjZWRpdC1hdmF0YXItbW9kYWwgLm1vZGFsX19mb3JtXCJcbik7XG5cbmNvbnN0IGVkaXRQcm9maWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcbmNvbnN0IGVkaXRQcm9maWxlRm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjZWRpdC1wcm9maWxlLW1vZGFsIC5tb2RhbF9fZm9ybVwiXG4pO1xuY29uc3QgZWRpdFByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIik7XG5jb25zdCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLWlucHV0XCIpO1xuXG5jb25zdCBwcm9maWxlTmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBuZXdQcm9maWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXctYnRuXCIpO1xuY29uc3QgbmV3UHJvZmlsZUZvcm1FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI25ldy1wcm9maWxlLW1vZGFsIC5tb2RhbF9fZm9ybVwiXG4pO1xuXG5jb25zdCBwcmV2aWV3TW9kYWxTZWxlY3RvciA9IFwiI3ByZXZpZXctbW9kYWxcIjtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1wcmV2aWV3XCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcblxuY29uc3QgZGVsZXRlTW9kYWxTZWxlY3RvciA9IFwiI2RlbGV0ZS1tb2RhbFwiO1xuY29uc3QgY29uZmlybURlbGV0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtYnRuXCIpO1xuY29uc3QgY2FuY2VsRGVsZXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYW5jZWwtZGVsZXRlLWJ0blwiKTtcblxuY29uc3QgY2FyZHNMaXN0U2VsZWN0b3IgPSBcIi5jYXJkc19fbGlzdFwiO1xuY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XG5cbmxldCBjdXJyZW50VXNlcklkID0gbnVsbDtcbmxldCBzZWxlY3RlZENhcmQgPSBudWxsO1xubGV0IHNlbGVjdGVkQ2FyZElkID0gbnVsbDtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgUE9QVVBTXG49PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmNvbnN0IHByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cCh7IHBvcHVwU2VsZWN0b3I6IHByZXZpZXdNb2RhbFNlbGVjdG9yIH0pO1xucHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGRlbGV0ZVBvcHVwID0gbmV3IFBvcHVwKHsgcG9wdXBTZWxlY3RvcjogZGVsZXRlTW9kYWxTZWxlY3RvciB9KTtcbmRlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgIEFQSVxuPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9cIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNTg3NDRiZmEtYjg1MS00MWNkLTg3NDctZmI3YWY5YTg4ODM4XCIsXG4gICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgQ0FSRCBSRU5ERVJJTkdcbj09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuY29uc3QgcmVuZGVyQ2FyZCA9IChjYXJkRGF0YSwgeyBwb3NpdGlvbiA9IFwiYXBwZW5kXCIgfSA9IHt9KSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICB7XG4gICAgICBoYW5kbGVMaWtlOiAoY2FyZEluc3RhbmNlKSA9PiB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5saWtlQ2FyZChjYXJkSW5zdGFuY2UuaWQpXG4gICAgICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XG4gICAgICAgICAgICBjYXJkSW5zdGFuY2Uuc2V0TGlrZVN0YXRlKHVwZGF0ZWRDYXJkLmlzTGlrZWQpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJMaWtlIGZhaWxlZDpcIiwgZXJyKSk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlVW5saWtlOiAoY2FyZEluc3RhbmNlKSA9PiB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC51bmxpa2VDYXJkKGNhcmRJbnN0YW5jZS5pZClcbiAgICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcbiAgICAgICAgICAgIGNhcmRJbnN0YW5jZS5zZXRMaWtlU3RhdGUodXBkYXRlZENhcmQuaXNMaWtlZCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIlVubGlrZSBmYWlsZWQ6XCIsIGVycikpO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZURlbGV0ZTogKGNhcmRJbnN0YW5jZSkgPT4ge1xuICAgICAgICBzZWxlY3RlZENhcmQgPSBjYXJkSW5zdGFuY2U7XG4gICAgICAgIHNlbGVjdGVkQ2FyZElkID0gY2FyZEluc3RhbmNlLmlkO1xuICAgICAgICBkZWxldGVQb3B1cC5vcGVuKCk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlUHJldmlldzogKGRhdGEpID0+IHtcbiAgICAgICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgICAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgICAgICAgcHJldmlld01vZGFsSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgICAgIHByZXZpZXdQb3B1cC5vcGVuKCk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgY3VycmVudFVzZXJJZFxuICApO1xuXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZXRWaWV3KCk7XG4gIHNwb3RzU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LCB7IHBvc2l0aW9uIH0pO1xufTtcblxuY29uc3Qgc3BvdHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogW10sXG4gIHJlbmRlcmVyOiAoaXRlbURhdGEpID0+IHJlbmRlckNhcmQoaXRlbURhdGEsIHsgcG9zaXRpb246IFwiYXBwZW5kXCIgfSksXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBjYXJkc0xpc3RTZWxlY3Rvcixcbn0pO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICBERUxFVEUgQ09ORklSTUFUSU9OIExPR0lDXG49PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmNvbmZpcm1EZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaWYgKCFzZWxlY3RlZENhcmRJZCkgcmV0dXJuO1xuXG4gIGNvbmZpcm1EZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XG5cbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgc2VsZWN0ZWRDYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XG5cbiAgICAgIHNlbGVjdGVkQ2FyZCA9IG51bGw7XG4gICAgICBzZWxlY3RlZENhcmRJZCA9IG51bGw7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkRlbGV0ZSBmYWlsZWQ6XCIsIGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY29uZmlybURlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gICAgfSk7XG59KTtcblxuY2FuY2VsRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XG59KTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgUE9QVVAgV0lUSCBGT1JNOiBBVkFUQVJcbj09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuY29uc3QgZWRpdEF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNlZGl0LWF2YXRhci1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybVZhbHVlcykgPT4ge1xuICAgIGVkaXRBdmF0YXJQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZUF2YXRhcih7XG4gICAgICAgIGF2YXRhcjogZm9ybVZhbHVlcy5hdmF0YXIsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHVwZGF0ZWRVc2VyKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpLnNyYyA9IHVwZGF0ZWRVc2VyLmF2YXRhcjtcbiAgICAgICAgZWRpdEF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgICAgIGF2YXRhclZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBhdmF0YXI6XCIsIGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBlZGl0QXZhdGFyUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgIFBPUFVQIFdJVEggRk9STTogUFJPRklMRVxuPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1WYWx1ZXMpID0+IHtcbiAgICBlZGl0UHJvZmlsZVBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgYXBpXG4gICAgICAudXBkYXRlVXNlckluZm8oe1xuICAgICAgICBuYW1lOiBmb3JtVmFsdWVzLnByb2ZpbGVOYW1lLFxuICAgICAgICBhYm91dDogZm9ybVZhbHVlcy5wcm9maWxlRGVzY3JpcHRpb24sXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHVwZGF0ZWRVc2VyKSA9PiB7XG4gICAgICAgIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSB1cGRhdGVkVXNlci5uYW1lO1xuICAgICAgICBwcm9maWxlRGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCA9IHVwZGF0ZWRVc2VyLmFib3V0O1xuICAgICAgICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgICAgIGVkaXRWYWxpZGF0b3IucmVzZXRGb3JtKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZTpcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICBQT1BVUCBXSVRIIEZPUk06IE5FVyBQT1NUXG49PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmNvbnN0IG5ld1Bvc3RQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjbmV3LXByb2ZpbGUtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1WYWx1ZXMpID0+IHtcbiAgICBuZXdQb3N0UG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcbiAgICBhcGlcbiAgICAgIC5hZGRDYXJkKHtcbiAgICAgICAgbmFtZTogZm9ybVZhbHVlcy5pbWFnZUNhcHRpb24sXG4gICAgICAgIGxpbms6IGZvcm1WYWx1ZXMuaW1hZ2VMaW5rLFxuICAgICAgfSlcbiAgICAgIC50aGVuKChjcmVhdGVkQ2FyZCkgPT4ge1xuICAgICAgICByZW5kZXJDYXJkKGNyZWF0ZWRDYXJkLCB7IHBvc2l0aW9uOiBcInByZXBlbmRcIiB9KTtcbiAgICAgICAgbmV3UG9zdFBvcHVwLmNsb3NlKCk7XG4gICAgICAgIG5ld1ZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGFkZCBjYXJkOlwiLCBlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgbmV3UG9zdFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sXG4gIGRpc2FibGVCdXR0b25Pbk9wZW46IHRydWUsXG59KTtcbm5ld1Bvc3RQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICBWQUxJREFUSU9OIEVOQUJMRVJTXG49PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmNvbnN0IGVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdFByb2ZpbGVGb3JtRWwpO1xuZWRpdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IG5ld1ZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBuZXdQcm9maWxlRm9ybUVsKTtcbm5ld1ZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBlZGl0QXZhdGFyRm9ybUVsKTtcbmF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgIEVWRU5UIExJU1RFTkVSU1xuPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5lZGl0UHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQ7XG4gIGVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50O1xuXG4gIGVkaXRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbm5ld1Byb2ZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbmV3UG9zdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hdmF0YXJFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGF2YXRhclZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICBJTklUSUFMIERBVEEgTE9BRFxuPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xuICAgIGN1cnJlbnRVc2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKS5zcmMgPSB1c2VyRGF0YS5hdmF0YXI7XG5cbiAgICBzcG90c1NlY3Rpb24uc2V0SXRlbXMoY2FyZHMpO1xuICAgIHNwb3RzU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGluaXRpYWwgZGF0YTpcIiwgZXJyKTtcbiAgfSk7XG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX3JlcXVlc3QoZW5kcG9pbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfSR7ZW5kcG9pbnR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwidXNlcnMvbWVcIik7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCJ1c2Vycy9tZVwiLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcInVzZXJzL21lL2F2YXRhclwiLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiY2FyZHNcIik7XG4gIH1cblxuICBhZGRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcImNhcmRzXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGNhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGBjYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgfSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGBjYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMgPSBbXSwgcmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vIGZ1bmN0aW9uIHRoYXQga25vd3MgaG93IHRvIGNyZWF0ZSAmIGFkZCBhIHNpbmdsZSBpdGVtXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICAvLyBSZW5kZXIgYWxsIGluaXRpYWwgaXRlbXMgYnkgY2FsbGluZyB0aGUgcmVuZGVyZXIgKG9uY2Ugb24gcGFnZSBsb2FkKVxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAvLyByZW5kZXJlciBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIGVsZW1lbnQgYW5kIGFkZGluZyBpdFxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgYSBET00gZWxlbWVudCB0byB0aGUgY29udGFpbmVyLiBwb3NpdGlvbiA9ICdhcHBlbmQnIG9yICdwcmVwZW5kJ1xuICBhZGRJdGVtKGVsZW1lbnQsIHsgcG9zaXRpb24gPSBcImFwcGVuZFwiIH0gPSB7fSkge1xuICAgIGlmIChwb3NpdGlvbiA9PT0gXCJwcmVwZW5kXCIpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHNldEl0ZW1zKGl0ZW1zKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwibGFiZWxTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImxhYmVsRXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjb25zdHJ1Y3RvciIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2Vycm9yQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2xhYmVsRXJyb3JDbGFzcyIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImxhYmVsRWxlbWVudCIsImNsb3Nlc3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsInNvbWUiLCJpbnB1dEVsIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJyZXNldEZvcm0iLCJyZXNldCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlTGlrZSIsImhhbmRsZVVubGlrZSIsImhhbmRsZURlbGV0ZSIsImhhbmRsZVByZXZpZXciLCJjdXJyZW50VXNlcklkIiwiX2RhdGEiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZVVubGlrZSIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlUHJldmlldyIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfY3VycmVudFVzZXJJZCIsIl9pc0xpa2VkIiwiQm9vbGVhbiIsImlzTGlrZWQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfdXBkYXRlTGlrZVN0YXRlIiwiX2xpa2VCdG4iLCJzZXRMaWtlU3RhdGUiLCJkZWxldGVDYXJkIiwiX2VsZW1lbnQiLCJfZGVsZXRlQnRuIiwiX2ltYWdlRWwiLCJnZXRWaWV3IiwiX3RpdGxlRWwiLCJuYW1lIiwic3JjIiwibGluayIsImFsdCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwQ2xvc2VCdG4iLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiaXNPdmVybGF5Q2xpY2siLCJ0YXJnZXQiLCJjb250YWlucyIsImlzQ2xvc2VCdXR0b24iLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJkaXNhYmxlQnV0dG9uT25PcGVuIiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9kaXNhYmxlQnV0dG9uT25PcGVuIiwiX2Zvcm0iLCJfc3VibWl0QnRuIiwiX2RlZmF1bHRTdWJtaXRUZXh0Iiwic2V0TG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0VmFsdWVzIiwiYXZhdGFyRWRpdEJ0biIsImVkaXRBdmF0YXJGb3JtRWwiLCJlZGl0UHJvZmlsZUJ0biIsImVkaXRQcm9maWxlRm9ybUVsIiwiZWRpdFByb2ZpbGVOYW1lSW5wdXQiLCJlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlTmFtZUVsIiwicHJvZmlsZURlc2NyaXB0aW9uRWwiLCJuZXdQcm9maWxlQnRuIiwibmV3UHJvZmlsZUZvcm1FbCIsInByZXZpZXdNb2RhbEltYWdlRWwiLCJwcmV2aWV3TW9kYWxDYXB0aW9uRWwiLCJjb25maXJtRGVsZXRlQnRuIiwiY2FuY2VsRGVsZXRlQnRuIiwic2VsZWN0ZWRDYXJkIiwic2VsZWN0ZWRDYXJkSWQiLCJwcmV2aWV3UG9wdXAiLCJkZWxldGVQb3B1cCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9yZXF1ZXN0IiwiZW5kcG9pbnQiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZUF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImFkZENhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJhdXRob3JpemF0aW9uIiwicmVuZGVyQ2FyZCIsImNhcmREYXRhIiwicG9zaXRpb24iLCJjYXJkRWxlbWVudCIsIkNhcmQiLCJjYXJkSW5zdGFuY2UiLCJ1cGRhdGVkQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3BvdHNTZWN0aW9uIiwiYWRkSXRlbSIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImFwcGVuZCIsInNldEl0ZW1zIiwiaXRlbURhdGEiLCJmaW5hbGx5IiwiZWRpdEF2YXRhclBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImF2YXRhciIsInVwZGF0ZWRVc2VyIiwiYXZhdGFyVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVQb3B1cCIsInByb2ZpbGVOYW1lIiwiYWJvdXQiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0VmFsaWRhdG9yIiwibmV3UG9zdFBvcHVwIiwiaW1hZ2VDYXB0aW9uIiwiaW1hZ2VMaW5rIiwiY3JlYXRlZENhcmQiLCJuZXdWYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWxsIiwidXNlckRhdGEiLCJjYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=